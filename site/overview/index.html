
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Finitewave package for modeling cardiac electrophysiology">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../getting_started/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.36">
    
    
      
        <title>Overview - Finitewave</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.06209087.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Finitewave" class="md-header__button md-logo" aria-label="Finitewave" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Finitewave
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Finitewave" class="md-nav__button md-logo" aria-label="Finitewave" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Finitewave
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Overview
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cardiactissue" class="md-nav__link">
    <span class="md-ellipsis">
      CardiacTissue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CardiacTissue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mesh" class="md-nav__link">
    <span class="md-ellipsis">
      Mesh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conductivity" class="md-nav__link">
    <span class="md-ellipsis">
      Conductivity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fibrosis" class="md-nav__link">
    <span class="md-ellipsis">
      Fibrosis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fibers" class="md-nav__link">
    <span class="md-ellipsis">
      Fibers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models" class="md-nav__link">
    <span class="md-ellipsis">
      Models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stimulation" class="md-nav__link">
    <span class="md-ellipsis">
      Stimulation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trackers" class="md-nav__link">
    <span class="md-ellipsis">
      Trackers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualization" class="md-nav__link">
    <span class="md-ellipsis">
      Visualization
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cardiactissue" class="md-nav__link">
    <span class="md-ellipsis">
      CardiacTissue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CardiacTissue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mesh" class="md-nav__link">
    <span class="md-ellipsis">
      Mesh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conductivity" class="md-nav__link">
    <span class="md-ellipsis">
      Conductivity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fibrosis" class="md-nav__link">
    <span class="md-ellipsis">
      Fibrosis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fibers" class="md-nav__link">
    <span class="md-ellipsis">
      Fibers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models" class="md-nav__link">
    <span class="md-ellipsis">
      Models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stimulation" class="md-nav__link">
    <span class="md-ellipsis">
      Stimulation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trackers" class="md-nav__link">
    <span class="md-ellipsis">
      Trackers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualization" class="md-nav__link">
    <span class="md-ellipsis">
      Visualization
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h1>
<h2 id="cardiactissue">CardiacTissue<a class="headerlink" href="#cardiactissue" title="Permanent link">&para;</a></h2>
<p>The <code>CardiacTissue</code> class is used to represent myocardial tissue and its
structural properties in simulations. It includes several key attributes that
define the characteristics and behavior of the cardiac mesh used in
finite-difference calculations.</p>
<h3 id="mesh">Mesh<a class="headerlink" href="#mesh" title="Permanent link">&para;</a></h3>
<p>The mesh attribute of the <code>CardiacTissue</code> class is a 2D or 3D array that
represents the structure of the cardiac tissue. Each element of the mesh
represents a cell in the tissue, with different values assigned to different
types of tissue:</p>
<ul>
<li>Cardiomyocytes: Represented by a value of 1.</li>
<li>Fibrotic tissue: Represented by a value of 2.</li>
<li>Empty nodes (boundary): Represented by a value of 0.</li>
</ul>
<p>The mesh can be initialized with a specific size and shape using the
<code>CardiacTissue2D</code> or <code>CardiacTissue3D</code> classes. The mesh can be modified
by setting the values of individual cells or by using the <code>add_boundaries()</code>
method to add a border of empty nodes around the tissue.</p>
<h3 id="conductivity">Conductivity<a class="headerlink" href="#conductivity" title="Permanent link">&para;</a></h3>
<p>The <code>conductivity</code> attribute of the <code>CardiacTissue</code> class is an array that
assigns different conductivities to different regions of the mesh. This allows
users to simulate the effects of fibrosis on wave propagation in the heart by
modifying the conductivity values in the tissue.</p>
<h3 id="fibrosis">Fibrosis<a class="headerlink" href="#fibrosis" title="Permanent link">&para;</a></h3>
<p>Fibrosis is a common feature of cardiac tissue that can be modeled in
simulations using Finitewave.</p>
<ul>
<li>
<p>Fibrotic tissue is represented by a conductivity array, which assigns 
  different conductivities to different regions of the mesh. This allows users
  to simulate the effects of fibrosis on wave propagation in the heart.</p>
</li>
<li>
<p>Another way to model fibrosis is to set <code>mesh</code> values to 2 (empty nodes).</p>
</li>
</ul>
<h3 id="fibers">Fibers<a class="headerlink" href="#fibers" title="Permanent link">&para;</a></h3>
<p>By default, Finitewave uses an isotropic conduction model, where the
conductivity is the same in all directions. And the fibers are not used in the
simulation. The default stencil is <code>IsotropicStencil2D</code> or
<code>IsotropicStencil3D</code>, which is used to calculate the weights for
the divergence kernels in the finite-difference scheme.</p>
<p>To simulate anisotropic conduction, users can define the orientation of
cardiac fibers in the tissue. This is done by setting the <code>fibers</code> attribute
of the <code>CardiacTissue</code> object to an array of vectors with
<code>fibers.shape == mesh.shape + (dim,)</code> that represent the orientation of
fibers at each node in the mesh.
For 2D simulations, the fibers array should have shape <code>(n, n, 2)</code>.
For 3D simulations, the fibers array should have shape <code>(n, n, n, 3)</code>.</p>
<p>To use the fibers in the simulation, set the <code>stencil</code> attribute of the
tissue to <code>AsymmetricStencil2D</code> or <code>AsymmetricStencil3D</code>.
Using the <code>AsymmetricStencil</code> is more time-consuming than the <code>IsotropicStencil</code>.
For example, <code>AsymmetricStencil2D</code> requires 9-point stencil calculations vs.
5-point stencil calculations for <code>IsotropicStencil</code>.</p>
<p>To set diffusion coefficients in the direction of fibers, use the
<code>D_al</code> and <code>D_ac</code> attributes of the tissue. For Aliev-Panfilov model,
<code>D_al = 1</code> and <code>D_ac = D_al / 9</code>.</p>
<h2 id="models">Models<a class="headerlink" href="#models" title="Permanent link">&para;</a></h2>
<p>Finitewave provides several built-in models for simulating cardiac
electrophysiology:</p>
<ul>
<li>Aliev-Panfilov model</li>
<li>TP06 model</li>
<li>Luo-Rudy91 model</li>
</ul>
<p>These models can be used to simulate the propagation of electrical waves in
cardiac tissue and study the effects of different conditions on wave
propagation.</p>
<h2 id="stimulation">Stimulation<a class="headerlink" href="#stimulation" title="Permanent link">&para;</a></h2>
<p>Stimulation is an essential aspect of cardiac electrophysiology simulations.
Finitewave provides several classes for defining and applying stimulation to
the tissue:</p>
<ul>
<li><code>StimVoltageCoord2D</code>: Stimulate a region of the tissue with a voltage.</li>
<li><code>StimCurrentCoord2D</code>: Stimulate a region of the tissue with a current.</li>
<li><code>StimVoltageMatrix2D</code>: Stimulate the tissue with a matrix with the same
  shape as the <code>tissue.mesh</code>. The stimulation will be applied to the cells
  with non-zero values.</li>
<li><code>StimCurrentMatrix2D</code>: Stimulate the tissue with a matrix with the same
  shape as the <code>tissue.mesh</code>. The stimulation current will be applied to
  the cells with non-zero values.</li>
</ul>
<p>Stimulation can be applied to the tissue using the <code>StimSequence</code> class,
which allows users to define a sequence of stimulations to be applied at
specific times during the simulation.</p>
<h2 id="trackers">Trackers<a class="headerlink" href="#trackers" title="Permanent link">&para;</a></h2>
<p>Trackers are used to measure various aspects of the simulation, such as
local activation times (LATs), electrogram signals (EGMs), and action
potentials, etc. Finitewave provides several built-in trackers for
measuring these properties:</p>
<ul>
<li><code>ActivationTimeTracker</code>: Measure local activation times (LATs) in the tissue.</li>
<li><code>MultiActivationTimeTracker</code>: Measure multiple activation times in case of
  multiple stimuli or multiple waves.</li>
<li><code>ECGTracker</code>: Measure EGMs and ECGs signals in the tissue.</li>
<li><code>ActionPotentialTracker</code>: Measure action potentials in the specific cell
  of the tissue.</li>
<li><code>VariableTracker</code>: Measure any variable in the specific cell of the tissue.</li>
<li><code>AnimationTracker</code>: Create an animation using variable values in the tissue.</li>
<li><code>PeriodTracker</code>: Measure the period of the wave in the tissue.</li>
</ul>
<h2 id="visualization">Visualization<a class="headerlink" href="#visualization" title="Permanent link">&para;</a></h2>
<p>Finitewave provides several tools for visualizing the results of cardiac
electrophysiology simulations in 3D. To show the results of the simulation,
use the <code>VisMeshBuilder3D</code> class to build a 3D mesh from the simulation
results and visualize the results using the <code>plot()</code> method. The
<code>VisMeshBuilder3D</code> based on <code>pyvista</code> library. The result can be saved as
<code>.vtk</code> or <code>.vtu</code> file for further analysis.</p>
<pre><code class="language-python">
   import finitewave as fw

   # Create a 3D mesh builder
   mesh_builder = fw.VisMeshBuilder3D()

   # Build a 3D mesh and mask empty (0) nodes
   grid = mesh_builder.build_mesh(tissue.mesh)

   # Add scalar data to the mesh
   grid = mesh_builder.add_scalar(aliev_panfilov.u, 'u')

   # Plot the mesh
   grid.plot(clim=[0, 1], cmap='viridis')

   # Save the potentials
   grid.save('u.vtk')

</code></pre>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>